<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mini CRM - GestÃ£o de Contatos</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="shortcut icon" href="../assets/favicon.ico" type="image/x-icon">
</head>
<body>
    <div class="app-container">
        <!-- Top Bar -->
        <header class="top-bar">
            <div class="top-bar-actions">
                <input type="file" id="importInput" accept=".json" style="display: none;">
                <button class="btn btn-secondary" onclick="importJSON()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="7 10 12 15 17 10"/>
                        <line x1="12" y1="15" x2="12" y2="3"/>
                    </svg>
                    Import JSON
                </button>
                <button class="btn btn-secondary" onclick="exportJSON()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                        <polyline points="17 8 12 3 7 8"/>
                        <line x1="12" y1="3" x2="12" y2="15"/>
                    </svg>
                    Export JSON
                </button>
                <button class="btn btn-primary" onclick="openAddModal()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="5" x2="12" y2="19"/>
                        <line x1="5" y1="12" x2="19" y2="12"/>
                    </svg>
                    Add Contact
                </button>
                <button class="btn btn-danger" onclick="resetData()">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="1 4 1 10 7 10"/>
                        <path d="M3.51 15a9 9 0 1 0 2.13-9.36L1 10"/>
                    </svg>
                    Reset Data
                </button>
                <div class="dropdown">
                    <button class="btn btn-icon" onclick="toggleDropdown()">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                            <circle cx="12" cy="5" r="2"/>
                            <circle cx="12" cy="12" r="2"/>
                            <circle cx="12" cy="19" r="2"/>
                        </svg>
                    </button>
                    <div class="dropdown-menu" id="dropdownMenu">
                        <button onclick="showAbout()">Sobre</button>
                        <button onclick="clearFilters()">Limpar Filtros</button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Time Info Bar -->
        <div class="time-info-bar">
            <span id="timeInfo">Seu HorÃ¡rio (UK): --:-- | DiferenÃ§a de fuso: -- --h</span>
        </div>

        <!-- Filters Section -->
        <div class="filters-section">
            <div class="filter-group">
                <label for="filterStatus">Status:</label>
                <select id="filterStatus" onchange="applyFilters()">
                    <option value="">Todos</option>
                    <option value="Pending">Pending</option>
                    <option value="Sent">Sent</option>
                    <option value="Replied">Replied</option>
                    <option value="No reply">No reply</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="filterCountry">PaÃ­s:</label>
                <select id="filterCountry" onchange="applyFilters()">
                    <option value="">Todos</option>
                </select>
            </div>
            <div class="filter-group">
                <label for="filterFollowUp">Follow-Up:</label>
                <select id="filterFollowUp" onchange="applyFilters()">
                    <option value="">Todos</option>
                    <option value="today">Hoje</option>
                    <option value="week">Esta Semana</option>
                    <option value="overdue">Atrasados</option>
                </select>
            </div>
            <div class="filter-group search-group">
                <label for="searchInput">Buscar:</label>
                <input type="text" id="searchInput" placeholder="Nome, contato, tipo..." oninput="applyFilters()">
            </div>
        </div>

        <!-- Table Container -->
        <div class="table-container">
            <table class="crm-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>PaÃ­s</th>
                        <th>HorÃ¡rio Local</th>
                        <th>Janela Ideal</th>
                        <th>Nome do NegÃ³cio</th>
                        <th>Tipo</th>
                        <th>Contato</th>
                        <th>Ãšltima AÃ§Ã£o</th>
                        <th>Status</th>
                        <th>Dias Sem</th>
                        <th>PrÃ³x. Follow-Up</th>
                        <th>Obs.</th>
                        <th>AÃ§Ãµes</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- Rows will be dynamically inserted here -->
                </tbody>
            </table>
        </div>

        <!-- Empty State -->
        <div class="empty-state" id="emptyState" style="display: none;">
            <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#9ca3af" stroke-width="1.5">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
            </svg>
            <h3>Nenhum contato encontrado</h3>
            <p>Clique em "+ Add Contact" para adicionar seu primeiro contato</p>
        </div>
    </div>

    <!-- Add/Edit Modal -->
    <div class="modal-overlay" id="modalOverlay" onclick="closeModal()">
        <div class="modal" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2 id="modalTitle">Adicionar Contato</h2>
                <button class="btn-close" onclick="closeModal()">&times;</button>
            </div>
            <form id="contactForm" onsubmit="saveContact(event)">
                <div class="form-grid">
                    <div class="form-group">
                        <label for="country">PaÃ­s *</label>
                        <select id="country" required onchange="updateCountryPreview()">
                            <option value="">Selecione...</option>
                            <option value="BR">ðŸ‡§ðŸ‡· Brasil</option>
                            <option value="PT">ðŸ‡µðŸ‡¹ Portugal</option>
                            <option value="UK">ðŸ‡¬ðŸ‡§ Reino Unido</option>
                            <option value="US">ðŸ‡ºðŸ‡¸ Estados Unidos</option>
                            <option value="MX">ðŸ‡²ðŸ‡½ MÃ©xico</option>
                            <option value="ES">ðŸ‡ªðŸ‡¸ Espanha</option>
                            <option value="FR">ðŸ‡«ðŸ‡· FranÃ§a</option>
                            <option value="DE">ðŸ‡©ðŸ‡ª Alemanha</option>
                            <option value="IT">ðŸ‡®ðŸ‡¹ ItÃ¡lia</option>
                            <option value="EE">ðŸ‡ªðŸ‡ª EstÃ´nia</option>
                            <option value="AR">ðŸ‡¦ðŸ‡· Argentina</option>
                            <option value="CL">ðŸ‡¨ðŸ‡± Chile</option>
                            <option value="CO">ðŸ‡¨ðŸ‡´ ColÃ´mbia</option>
                            <option value="JP">ðŸ‡¯ðŸ‡µ JapÃ£o</option>
                            <option value="CN">ðŸ‡¨ðŸ‡³ China</option>
                            <option value="AU">ðŸ‡¦ðŸ‡º AustrÃ¡lia</option>
                            <option value="CA">ðŸ‡¨ðŸ‡¦ CanadÃ¡</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="businessName">Nome do NegÃ³cio *</label>
                        <input type="text" id="businessName" required placeholder="Ex: CafÃ© Lisboa">
                    </div>
                    <div class="form-group">
                        <label for="businessType">Tipo *</label>
                        <select id="businessType" required>
                            <option value="">Selecione...</option>
                            <option value="Restaurante">Restaurante</option>
                            <option value="Cafeteria">Cafeteria</option>
                            <option value="Lanchonete">Lanchonete</option>
                            <option value="Hamburgueria">Hamburgueria</option>
                            <option value="Pizzaria">Pizzaria</option>
                            <option value="Padaria">Padaria</option>
                            <option value="Barbearia">Barbearia</option>
                            <option value="SalÃ£o de Beleza">SalÃ£o de Beleza</option>
                            <option value="Academia">Academia</option>
                            <option value="ClÃ­nica">ClÃ­nica</option>
                            <option value="Pet Shop">Pet Shop</option>
                            <option value="Loja">Loja</option>
                            <option value="Oficina">Oficina</option>
                            <option value="Outro">Outro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="contact">Contato *</label>
                        <input type="text" id="contact" required placeholder="Telefone, email ou @instagram">
                    </div>
                    <div class="form-group">
                        <label for="channel">Canal Principal</label>
                        <select id="channel">
                            <option value="WhatsApp">WhatsApp</option>
                            <option value="Instagram">Instagram</option>
                            <option value="Email">Email</option>
                            <option value="Phone">Telefone</option>
                            <option value="Website">Website</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="status">Status</label>
                        <select id="status">
                            <option value="Pending">Pending</option>
                            <option value="Sent">Sent</option>
                            <option value="Replied">Replied</option>
                            <option value="No reply">No reply</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="lastAction">Ãšltima AÃ§Ã£o</label>
                        <select id="lastAction">
                            <option value="">Nenhuma</option>
                            <option value="Mensagem Enviada">Mensagem Enviada</option>
                            <option value="Follow-Up 1">Follow-Up 1</option>
                            <option value="Follow-Up 2">Follow-Up 2</option>
                            <option value="Aguardando Retorno">Aguardando Retorno</option>
                            <option value="Fechado">Fechado</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="lastActionDate">Data da Ãšltima AÃ§Ã£o</label>
                        <input type="date" id="lastActionDate">
                    </div>
                    <div class="form-group">
                        <label for="nextFollowUp">PrÃ³ximo Follow-Up</label>
                        <input type="date" id="nextFollowUp">
                    </div>
                    <div class="form-group">
                        <label for="website">Website</label>
                        <input type="url" id="website" placeholder="https://...">
                    </div>
                    <div class="form-group">
                        <label for="instagram">Instagram</label>
                        <input type="text" id="instagram" placeholder="@usuario">
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" placeholder="email@exemplo.com">
                    </div>
                    <div class="form-group full-width">
                        <label for="notes">ObservaÃ§Ãµes</label>
                        <textarea id="notes" rows="2" placeholder="Notas adicionais..."></textarea>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancelar</button>
                    <button type="submit" class="btn btn-primary">Salvar</button>
                </div>
                <input type="hidden" id="editingId">
            </form>
        </div>
    </div>

    <!-- About Modal -->
    <div class="modal-overlay" id="aboutModal" onclick="closeAboutModal()">
        <div class="modal modal-small" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2>Sobre o Mini CRM</h2>
                <button class="btn-close" onclick="closeAboutModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p><strong>Mini CRM de Contatos</strong></p>
                <p>VersÃ£o 1.0.0</p>
                <br>
                <p>Uma ferramenta simples e offline para gestÃ£o de prospecÃ§Ã£o e follow-ups.</p>
                <br>
                <p><strong>Funcionalidades:</strong></p>
                <ul>
                    <li>âœ“ GestÃ£o de contatos</li>
                    <li>âœ“ CÃ¡lculo automÃ¡tico de fuso horÃ¡rio</li>
                    <li>âœ“ Janela ideal de contato</li>
                    <li>âœ“ Controle de follow-ups</li>
                    <li>âœ“ Import/Export JSON</li>
                    <li>âœ“ Funciona 100% offline</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Toast Notification -->
    <div class="toast" id="toast"></div>

    <script src="script.js"></script>
</body>
</html>